<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>Exhibitor | æœƒå“¡ä¸­å¿ƒï¼å¸³æˆ¶è³‡æ–™</title>
    <link rel="preload" href="/back-end/css/adminlte.css" as="style" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css" crossorigin="anonymous" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"/>
    <link rel="stylesheet" href="/back-end/css/adminlte.css" />
    <style>
      .kv-line{display:flex; gap:1rem; padding:.5rem 0; border-bottom:1px solid var(--bs-border-color)}
      .kv-line .k{width:120px; color:var(--bs-secondary-color)}
      .section-title{font-weight:700}
      
    </style>
  </head>
  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">
      <!-- Headerï¼ˆè‡ªå‹•æ³¨å…¥ï¼‰ -->
    <div data-include="/back-end/header.html"></div>
      

      <!-- Sidebar (ä½ çš„ç‰ˆæœ¬) -->
     <aside class="app-sidebar bg-body-secondary" data-bs-theme="dark">
        <div class="sidebar-brand">
          <a href="#" class="brand-link">
            <img src="/back-end/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image opacity-75 shadow" />
            <span class="brand-text fw-light">eventra</span>
          </a>
        </div>
        <div class="sidebar-wrapper">
          <nav class="mt-2">
            <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="navigation" data-accordion="false">
              <li class="nav-item"><a  class="nav-link"><p>å±•å•†å¾Œå°</p></a></li>
              <li class="nav-item menu-open">
                <a href="#" class="nav-link"><i class="nav-icon bi bi-circle-fill"></i><p>å±•è¦½ç®¡ç†</p></a>
                <ul class="nav nav-treeview">
                  <li class="nav-item"><a href="/back-end/exhibitor/exhibition_list" class="nav-link"><p>å±•è¦½åˆ—è¡¨</p></a></li>
                
                </ul>
              </li>
              <li class="nav-item menu-open">
                <a href="#" class="nav-link"><i class="nav-icon bi bi-circle-fill"></i><p>éŠ·å”®ç®¡ç†</p></a>
                <ul class="nav nav-treeview">
                  <li class="nav-item"><a href="/back-end/exhibitor/order_list" class="nav-link"><p>è¨‚å–®åˆ—è¡¨</p></a></li>
                  <li class="nav-item"><a href="#" class="nav-link"><p>éŠ·å”®åˆ—è¡¨</p></a></li>
                
                </ul>
              </li>
               <li class="nav-item menu-open">
                <a href="#" class="nav-link"><i class="nav-icon bi bi-circle-fill"></i><p>æœƒå“¡ä¸­å¿ƒ</p></a>
                <ul class="nav nav-treeview">
                  <li class="nav-item"><a href="/back-end/exhibitor/exhibitor_info" class="nav-link"><p>å±•å•†è³‡è¨Š</p></a></li>
                  <li class="nav-item"><a href="/back-end/exhibitor/exhibitor_account_data" class="nav-link"><p>å¸³æˆ¶è³‡æ–™</p></a></li>
                
                </ul>
              </li>
            </ul>
          </nav>
         <!-- åº•éƒ¨ï¼šç™»å‡ºé€£çµ -->
          <div class="p-3 border-top">
            <a href="/back-end/exhibitor/exhibitor_login" id="logoutLink" class="nav-link text-danger">
              <i class="bi bi-box-arrow-right me-1"></i> ç™»å‡º
            </a>
          </div>
        </div>
      </aside>

      <!-- Main -->
      <main class="app-main">
        <div class="app-content-header">
          <div class="container-fluid">
            <div class="row align-items-center">
              <div class="col-sm-8"><h3 class="mb-0">æœƒå“¡ä¸­å¿ƒï¼å¸³æˆ¶è³‡æ–™</h3></div>
              <div class="col-sm-4 text-sm-end mt-2 mt-sm-0">
                <button class="btn btn-outline-secondary btn-sm" id="btnEdit"><i class="bi bi-pencil me-1"></i>ç·¨è¼¯</button>
              </div>
            </div>
          </div>
        </div>

        <div class="app-content">
          <div class="container-fluid">
            <div class="card mb-4">
              <div class="card-body">
                <div class="kv-line"><div class="k">å¸³è™Ÿ(çµ±ç·¨)</div><div id="vTaxId">12345678</div></div>
                <div class="kv-line"><div class="k">ä¿¡ç®±</div><div id="vEmail">abc@gmail.com</div></div>
                <div class="kv-line"><div class="k">è¯çµ¡äººå§“å</div><div id="vContact">ç‹å°æ˜</div></div>
                <div class="kv-line"><div class="k">è¯çµ¡é›»è©±</div><div id="vPhone">0912345678</div></div>
                <div class="kv-line"><div class="k">å…¬å¸/å–®ä½åç¨±</div><div id="vCompany">XXXXXXå…¬å¸</div></div>
                <div class="kv-line" style="border:none"><div class="k">å¹³å°è¨»å†Šåç¨±</div><div id="vDisplay">OOOOOO</div></div>
              </div>
            </div>

            <div class="card">
              <div class="card-header"><span class="section-title">éŠ€è¡Œå¸³æˆ¶è³‡è¨Š</span></div>
              <div class="card-body">
                <div class="kv-line"><div class="k">æˆ¶å</div><div id="vBankOwner">ç‹å°æ˜</div></div>
                <div class="kv-line"><div class="k">éŠ€è¡Œä»£ç¢¼</div><div id="vBankCode">013åœ‹æ³°ä¸–è¯</div></div>
                <div class="kv-line" style="border:none"><div class="k">å¸³è™Ÿ</div><div id="vBankNo">012345678910</div></div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer class="app-footer">
        <!-- <div class="float-end d-none d-sm-inline">Anything you want</div>
        <strong>Copyright &copy; 2014-2025 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved. -->
      </footer>
    </div>

    <!-- ç·¨è¼¯ Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header"><h5 class="modal-title">ç·¨è¼¯å¸³æˆ¶è³‡æ–™</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
          <div class="modal-body">
            <form id="accountForm" class="row g-3 needs-validation" novalidate>
                <div class="col-md-6">
                    <label class="form-label">å¸³è™Ÿ(çµ±ç·¨)</label>
                    <input type="text" class="form-control" id="fTaxId" value="10000009" required pattern="^\d{8}$" />
                    <div class="invalid-feedback">è«‹è¼¸å…¥ 8 ç¢¼æ•¸å­—çµ±ä¸€ç·¨è™Ÿã€‚</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">ä¿¡ç®±</label>
                    <input type="email" class="form-control" id="fEmail" value="abc@gmail.com" required />
                    <div class="invalid-feedback">è«‹è¼¸å…¥æœ‰æ•ˆçš„ Emailã€‚</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">è¯çµ¡äººå§“å</label>
                    <input type="text" class="form-control" id="fContact" value="ç‹å°æ˜" required />
                    <div class="invalid-feedback">è«‹å¡«å¯«è¯çµ¡äººå§“åã€‚</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">è¯çµ¡é›»è©±</label>
                    <input type="text" class="form-control" id="fPhone" value="0912345678" required pattern="^09\d{8}$" />
                    <div class="invalid-feedback">è«‹è¼¸å…¥æ­£ç¢ºæ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆ09 é–‹é ­å…± 10 ç¢¼ï¼‰ã€‚</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">å…¬å¸/å–®ä½åç¨±</label>
                    <input type="text" class="form-control" id="fCompany" value="ç·¯è‚²è‚¡ä»½æœ‰é™å…¬å¸" required />
                    <div class="invalid-feedback">è«‹å¡«å¯«å…¬å¸/å–®ä½åç¨±ã€‚</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">å¹³å°è¨»å†Šåç¨±</label>
                    <input type="text" class="form-control" id="fDisplay" value="OOOOOO" required />
                    <div class="invalid-feedback">è«‹å¡«å¯«å¹³å°è¨»å†Šåç¨±ã€‚</div>
                </div>

                <div class="col-12"><hr class="my-2"></div>

                <div class="col-md-4">
                    <label class="form-label">æˆ¶å</label>
                    <input type="text" class="form-control" id="fBankOwner" value="ç‹å°æ˜" required />
                    <div class="invalid-feedback">è«‹å¡«å¯«æˆ¶åã€‚</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">éŠ€è¡Œä»£ç¢¼</label>
                    <input type="text" class="form-control" id="fBankCode" value="013åœ‹æ³°ä¸–è¯" required />
                    <div class="invalid-feedback">è«‹å¡«å¯«éŠ€è¡Œä»£ç¢¼ï¼ˆä¾‹å¦‚ 013 åœ‹æ³°ä¸–è¯ï¼‰ã€‚</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">å¸³è™Ÿ</label>
                    <input type="text" class="form-control" id="fBankNo" value="012345678910" required pattern="^\d{7,14}$" />
                    <div class="invalid-feedback">è«‹è¼¸å…¥ 7â€“14 ç¢¼æ•¸å­—å¸³è™Ÿã€‚</div>
                </div>
            </form>

          </div>
          <div class="modal-footer">
            <button  type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
            <button  type="button" class="btn btn-primary" id="btnSave">å„²å­˜</button>
          </div>
        </div>
      </div>
    </div>

	
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js"></script>
    <script src="/back-end/js/adminlte.min.js"></script>
    <script src="/front-end/js/g1_10_custom_common_csrf.js"></script>
    <script>
       (() => {
  const modalEl = document.getElementById('editModal');
  const modal   = new bootstrap.Modal(modalEl);
  const form    = document.getElementById('accountForm');

  const ids = ['fTaxId','fEmail','fContact','fPhone','fCompany','fDisplay','fBankOwner','fBankCode','fBankNo'];
  const els = Object.fromEntries(ids.map(id => [id, document.getElementById(id)]));

  // çµ±ç·¨æª¢æŸ¥ç¢¼
  function isValidVat(taxId) {
    if (!/^\d{8}$/.test(taxId)) return false;
    const w = [1,2,1,2,1,2,4,1];
    let sum = 0;
    for (let i=0;i<8;i++){
      const p = (taxId.charCodeAt(i)-48)*w[i];
      sum += Math.floor(p/10) + (p%10);
    }
    return (sum%10===0) || (taxId[6]==='7' && (sum+1)%10===0);
  }

  // ğŸ‘‰ é–‹å•Ÿæ™‚å…ˆã€Œé‡ç½®ã€é©—è­‰ç‹€æ…‹ï¼ˆé—œéµï¼‰
  function resetValidation() {
    form.classList.remove('was-validated');
    form.querySelectorAll('.is-valid, .is-invalid').forEach(el => {
      el.classList.remove('is-valid','is-invalid');
    });
    // æ¸…æ‰ä»»ä½•è‡ªè¨‚éŒ¯èª¤
    els.fTaxId?.setCustomValidity('');
  }
  modalEl.addEventListener('show.bs.modal', resetValidation);

  // é–‹å•Ÿç·¨è¼¯
  document.getElementById('btnEdit')?.addEventListener('click', () => modal.show());

  // å³æ™‚é©—è­‰ï¼šè¼¸å…¥/å¤±ç„¦æ‰é¡¯ç¤º
  function liveCheck(el, custom) {
    el.addEventListener('input', () => {
      custom && custom(el);                 // è®“è‡ªè¨‚è¦å‰‡æ›´æ–°
      if (form.classList.contains('was-validated')) {
        el.classList.toggle('is-invalid', !el.checkValidity());
        el.classList.toggle('is-valid',   el.checkValidity());
      }
    });
    el.addEventListener('blur', () => {
      custom && custom(el);
      el.classList.toggle('is-invalid', !el.checkValidity());
      el.classList.toggle('is-valid',   el.checkValidity());
    });
  }

  // çµ±ç·¨ï¼šåŒæ™‚åš pattern èˆ‡æª¢æŸ¥ç¢¼ï¼›æ­£ç¢ºæ™‚è¦æŠŠè‡ªè¨‚éŒ¯èª¤æ¸…æ‰
  liveCheck(els.fTaxId, (el) => {
    el.setCustomValidity('');
    if (el.value && !isValidVat(el.value)) el.setCustomValidity('å¸³è™Ÿç„¡æ•ˆ');
  });
  // æ‰‹æ©Ÿé  patternï¼Œå…¶ä»–å¿…å¡«é ç€è¦½å™¨åŸç”Ÿ
  [els.fEmail, els.fContact, els.fPhone, els.fCompany, els.fDisplay, els.fBankOwner, els.fBankCode, els.fBankNo]
    .forEach(el => el && liveCheck(el));

  // å„²å­˜
  document.getElementById('btnSave')?.addEventListener('click', () => {
    // å†è·‘ä¸€æ¬¡çµ±ç·¨è‡ªè¨‚æª¢æŸ¥
    els.fTaxId?.setCustomValidity('');
    if (els.fTaxId?.value && !isValidVat(els.fTaxId.value)) {
      els.fTaxId.setCustomValidity('å¸³è™Ÿç„¡æ•ˆ');
    }

    // åªæœ‰ã€Œé©—è­‰ä¸é€šéã€æ‰åŠ  was-validated è®“ç´…å­—é¡¯ç¤º
    if (!form.checkValidity()) {
      form.classList.add('was-validated');
      form.querySelector(':invalid')?.focus();
      return;
    }

    // é€šé â†’ æ›´æ–°ç•«é¢
    const get = id => els[id].value.trim() || '-';
    document.getElementById('vTaxId').textContent     = get('fTaxId');
    document.getElementById('vEmail').textContent     = get('fEmail');
    document.getElementById('vContact').textContent   = get('fContact');
    document.getElementById('vPhone').textContent     = get('fPhone');
    document.getElementById('vCompany').textContent   = get('fCompany');
    document.getElementById('vDisplay').textContent   = get('fDisplay');
    document.getElementById('vBankOwner').textContent = get('fBankOwner');
    document.getElementById('vBankCode').textContent  = get('fBankCode');
    document.getElementById('vBankNo').textContent    = get('fBankNo');

    modal.hide();
    resetValidation(); // é—œé–‰å‰ä¹Ÿé †ä¾¿æ¸…ä¹¾æ·¨ï¼Œä¸‹ä¸€æ¬¡æ‰“é–‹ä¸æœƒä¸€é–‹å§‹å°±ç´…
  });
})();
//   (function () {
//     const modalEl   = document.getElementById('editModal');
//     const editModal = bootstrap.Modal.getOrCreateInstance(modalEl);
//     const form      = document.getElementById('accountForm');

//     // é–‹å•Ÿç·¨è¼¯
//     document.getElementById('btnEdit')?.addEventListener('click', () => editModal.show());

//     // ROC çµ±ç·¨æª¢æŸ¥ç¢¼
//     function isValidVat(taxId) {
//       if (!/^\d{8}$/.test(taxId)) return false;
//       const w = [1,2,1,2,1,2,4,1];
//       let sum = 0;
//       for (let i=0;i<8;i++){
//         const p = (taxId.charCodeAt(i)-48)*w[i];
//         sum += Math.floor(p/10) + (p%10);
//       }
//       if (sum % 10 === 0) return true;
//       if (taxId[6] === '7' && (sum+1) % 10 === 0) return true;
//       return false;
//     }

//     // ä½ çš„ç°¡åŒ–ç‰ˆé©—è­‰ï¼šåŸç”Ÿ + çµ±ç·¨æª¢æŸ¥
//     function runValidate() {
//       // å…ˆæ¸…æ‰è‡ªè¨‚éŒ¯èª¤
//       document.getElementById('fTaxId').setCustomValidity('');
//       // åŸç”Ÿé©—è­‰
//       if (!form.checkValidity()) return false;
//       // çµ±ç·¨æª¢æŸ¥ç¢¼
//       const tax = document.getElementById('fTaxId');
//       if (tax.value && !isValidVat(tax.value)) {
//         tax.setCustomValidity('invalid');
//         form.reportValidity();
//         return false;
//       }
//       return true;
//     }

//     // å„²å­˜
//     document.getElementById('btnSave')?.addEventListener('click', () => {
//       form.classList.add('was-validated');
//       if (!runValidate()) return;

//       // æ›´æ–°ç•«é¢
//       const get = id => document.getElementById(id).value.trim() || '-';
//       document.getElementById('vTaxId').textContent   = get('fTaxId');
//       document.getElementById('vEmail').textContent   = get('fEmail');
//       document.getElementById('vContact').textContent = get('fContact');
//       document.getElementById('vPhone').textContent   = get('fPhone');
//       document.getElementById('vCompany').textContent = get('fCompany');
//       document.getElementById('vDisplay').textContent = get('fDisplay');
//       document.getElementById('vBankOwner').textContent = get('fBankOwner');
//       document.getElementById('vBankCode').textContent  = get('fBankCode');
//       document.getElementById('vBankNo').textContent    = get('fBankNo');

//       editModal.hide();

//       // ä¿éšªï¼šæ¸…æ‰æ®˜ç•™ backdropï¼ˆé¿å…ç•«é¢ç°æ‰ï¼‰
//       setTimeout(() => {
//         document.body.classList.remove('modal-open');
//         document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
//       }, 150);
//     });
//   })();
</script>
      <script>
        document.getElementById('logoutLink')?.addEventListener('click', (e) => {
          e.preventDefault();
          // æ¸…é™¤ç™»å…¥ç´€éŒ„
          sessionStorage.removeItem('exhibitorSession');
          // å°å›ç™»å…¥é 
          window.location.href = '/back-end/exhibitor/exhibitor_login';
        });
      </script>

      <script>
    (async () => {
      // è®“æ”¾äº† data-include çš„å®¹å™¨å…ˆéš±è—ï¼Œé¿å… FOUC
      document.querySelectorAll('[data-include]').forEach(el => el.style.visibility = 'hidden');

      // è¼‰å…¥æ‰€æœ‰ partial
      const tasks = [...document.querySelectorAll('[data-include]')].map(async (el) => {
        const url = el.getAttribute('data-include');
        const bust = `v=${encodeURIComponent((window.__PARTIALS_VERSION__) || '1')}`; // å¯æ‰‹å‹•æ”¹ç‰ˆæœ¬æ¸…å¿«å–
        const src = url.includes('?') ? `${url}&${bust}` : `${url}?${bust}`;
        try {
          const res = await csrfFetchToRedirect(src, { cache: 'no-store' });
          if (!res.ok) throw new Error(res.statusText);
          el.innerHTML = await res.text();
          el.style.visibility = 'visible';
          el.dispatchEvent(new CustomEvent('partial:loaded', { bubbles: true }));
        } catch (err) {
          el.innerHTML = `<!-- include failed: ${url} -->`;
          el.style.visibility = 'visible';
          console.warn('Include failed:', url, err);
        }
      });

      await Promise.all(tasks);

      // 1) æ ¹æ“šç›®å‰ URL è‡ªå‹•åŠ ä¸Š activeï¼ˆå¦‚æœ sidebar è£¡çš„ a[href] å‰›å¥½æŒ‡åˆ°ç•¶å‰é ï¼‰
      const here = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('aside a.nav-link, aside .nav-treeview a.nav-link').forEach(a => {
        const href = (a.getAttribute('href') || '').split('/').pop();
        if (href && href === here) a.classList.add('active');
      });

      // 2) AdminLTE å¦‚æœè¦åˆå§‹åŒ–ï¼ˆä¾ä½ å°ˆæ¡ˆéœ€è¦ï¼‰
      // window.AdminLTE && window.AdminLTE.autoInit?.();

      // 3) ç™»å‡ºï¼ˆè‹¥è¦æ¸… sessionStorage / localStorageï¼‰
      const logout = document.getElementById('logoutLink');
      if (logout) {
        logout.addEventListener('click', (e) => {
          // e.preventDefault(); // è‹¥è¦æ””æˆªå°é å†æ‰‹å‹•è·³è½‰ï¼Œå–æ¶ˆè¨»è§£
          sessionStorage.removeItem('auth');       // ä¾å°ˆæ¡ˆå¯¦éš›ä½¿ç”¨çš„ key
          sessionStorage.removeItem('editingEvent');
          // location.href = logout.getAttribute('href'); // è‹¥æ””æˆªï¼Œæœ€å¾Œå°å›ç™»å…¥é 
        });
      }
    })();
    </script>
  </body>
</html>
